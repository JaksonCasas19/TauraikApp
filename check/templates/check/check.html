{% extends "ProyectoWebApp/base.html" %}

{% block title %} Servicios {% endblock %}

{% load static %}

{% block content %}

<h1 class="text-center">QR</h1>
<div class="container">
  <div class="row">
{% for miLista in miListas %}
    <div class="col">
        <div class="card" style="width: 20rem;">
            <img src="{{miLista.qr_code.url}}" class="card-img-top">
            <div class="card-body">
              <h5 class="card-title">{{miLista.name}}</h5>
              <a href="#" class="btn btn-primary">Go somewhere</a>
            </div>
          </div>
    </div>
    {% endfor %}
  </div>
</div>


   <div>
        <video id="previsualizacion" style="width: 40%;"></video>
    </div>
    <p></p>

    <input type="text" id="txtResult" />


    <script type="text/javascript">
        //var sonido = new Audio("barcode.wav");

        var scanner = new Instascan.Scanner({
            video: document.getElementById('previsualizacion'),
            scanPeriod:5,
            mirror:false
        });

        Instascan.Camera.getCameras().then(function(cameras){
            if(cameras.length > 0){
                scanner.start(cameras[0]);
            }else{
                console.error('No se han encontrado camaras');
                alert('Camara no encontrada')
            }
        }).catch(function(e){
            console.error(e);
            alert("Error"+e);

        });

        scanner.addListener('scan',function(respuesta){
            console.log("Contenido:"+respuesta);
            //sonido.play();
            alert(respuesta);
            //label.value = respuesta;

            document.getElementById('txtResult').value = respuesta;
        });

    </script>



{% endblock %}